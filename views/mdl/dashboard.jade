block variables
  title Profile - Transcord

extends layout

block content
  main.mdl-layout__content.bg
    div.mdl-grid(style="max-width:900px")
      div.mdl-card.mdl-shadow--160dp.mdl-cell.mdl-cell--12-col
        div.mdl-card__title
          h2.mdl-card__title-text !{user.name}
        div.mdl-card__supporting-text
          p This is some text
        div.mdl-card__actions.mdl-card--border
          a.mdl-button.mdl-button--colored.mdl-js-button.mdl-js-ripple-effect Get Started

      div.mdl-card.mdl-shadow--160dp.mdl-cell.mdl-cell--4-col
        div.mdl-card__title
          h2.mdl-card__title-text Balance
        div.mdl-card__supporting-text
          - if(user.balance !== 'undefined' && user.balance) {
          - var balance = (user.balance/100).toFixed(2);
              p $!{balance}
          - } else {
              p $0.00
          - }
        div.mdl-card__actions.mdl-card--border
          a.mdl-button.mdl-button--colored.mdl-js-button.mdl-js-ripple-effect(href='/dashboard/payment') Top up your account

      div.mdl-card.mdl-cell.mdl-cell--8-col
        div.mdl-grid.table-grid
          - var i=0;
          - user.recordings.forEach(function(recording) {
            div.recording-card.mdl-card.mdl-shadow--2dp.mdl-cell.mdl-cell--12-col
              div.mdl-card__title.mdl-color--primary.mdl-color-text--white
                h2.mdl-card__title-text Call to !{recording.numberCalledFormatted}
              div.mdl-card__supporting-text
                button.recording-play-button.mdl-button.mdl-js-button.mdl-button--fab.mdl-button--colored(id='button-' + i)
                  i.material-icons.play(id='button-text-' + i) play_arrow
                div.mdl-grid
                  div.mdl-card.mdl-cell.mdl-cell--4-col
                    b(style='font-weight=500') !{recording.numberCalledFormatted}
                    - recording.startTimeFormatted = new Date(recording.startTime.toString());
                    p(style='font-weight=300,font-size=10px') !{moment(recording.startTimeFormatted).format('MMM DD, YYYY h:mm a')}
                  div.mdl-card.mdl-cell.mdl-cell--8-col
                    div.waveform(id='waveform-' + i data-id=i data-recordingUrl=recording.recordingUrl)
                      div(id="progress-" + i class="mdl-progress mdl-js-progress mdl-progress__indeterminate")
              div.mdl-card__actions.mdl-card--border
                a.mdl-button.mdl-button--acent.mdl-js-button.mdl-js-ripple-effect(href='/dashboard/transcript/' + recording.recordingSid) Transcript
            - i++;
          - })
    //include footer

block js
  script(src="//cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/2.0.6/wavesurfer.min.js")
  script(src="/js/recordings.js")
